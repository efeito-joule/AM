<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<ui:composition template="WEB-INF/_templateAluno.xhtml">
	<ui:define name="header">
	</ui:define>
	<ui:define name="body">
	    <h1><i class="fa fa-trophy"></i> Ranking</h1>
	    	<div class="jumbotron" style="background:#DCDCDC!important">
  				<div class="row">
  				<div class="col-md-8">
  				<h2>Quer saber sua posição com relação aos outros alunos?</h2>
  				<h4>É só escolher um curso e uma aula:</h4>
  				</div>
  				</div>
  			<div class="row">
	    		<div class="col-md-4">
					<h:messages styleClass="alert alert-success" autoUpdate="true"/>
				</div>
			</div>
	    	<h:form id="formulario1"  >
				<div class="row" style="margin-top: 10px;">
				<div class="col-md-5">
  					<h:selectOneMenu styleClass="form-control" value="#{rankingBean.resposta}" rendered="#{rankingBean.aulas==null}">
  					<f:selectItem itemValue="" itemLabel="Selecione um curso" />
  					<f:selectItems value="#{rankingBean.cursos}" var="c"
  					itemLabel="#{c.nome}"
  					itemValue="#{c.id}"/>
  					</h:selectOneMenu>
  				</div>
  				</div>
  				
  				<div class="row" style="margin-top: 10px;">
				<div class="col-dm-3" rendered="#{rankingBean.aulas==null}">
					<h:commandButton styleClass="btn btn-default" rendered="#{rankingBean.aulas==null}" value="Carregar" 
						actionListener="#{rankingBean.carregarAulas()}" />
				</div>
				</div>
				</h:form>
				
				<h:form id="formulario2"  >
	    		
				<div class="row" rendered="#{rankingBean.aulas!=null}" >
				<div class="col-md-5" rendered="#{rankingBean.aulas!=null}" >
  					<h:selectOneMenu styleClass="form-control"  value="#{rankingBean.resposta}" rendered="#{rankingBean.aulas!=null}" >
  					<f:selectItem itemValue="" itemLabel="Selecione uma aula" />
  					<f:selectItems value="#{rankingBean.aulas}" var="a"
  					itemLabel="#{a.nome}"
  					itemValue="#{a.id}"/>
  					</h:selectOneMenu>
  				</div>
  				</div>
  				
  				<div class="row" style="margin-top: 10px;">
				<div class="col-dm-3">
					<h:commandButton styleClass="btn btn-default" rendered="#{rankingBean.aulas!=null}" value="Carregar" 
						actionListener="#{rankingBean.mostrarRanking}" />
				</div>
				</div>
				
  			</h:form>	
	    </div>
  			
	    
	    <div class="row" style="margin-top: 10px;">
			<div class="col-md-6">
				<h:outputLabel rendered="#{rankingBean.aula!=null}">Ranking Geral: <button rendered="#{rankingBean.aula!=null}" class="btn btn-primary" type="button">
  				Sua Posição <span class="badge"><h:outputText  value="#{rankingBean.posicaoTotalAluno}"></h:outputText></span>
  		</button></h:outputLabel>
			</div>
			<div class="col-md-6">
					<h:outputLabel rendered="#{rankingBean.aula!=null}">Ranking para aula <button rendered="#{rankingBean.aula!=null}" class="btn btn-primary" type="button">
  				Sua Posição <span class="badge"><h:outputText  value="#{rankingBean.posicaoAulaAluno}"></h:outputText></span>
  		</button></h:outputLabel>
			</div>
		</div>
		<div class="row" style="margin-top: 20px;">
		<h:panelGrid columns="2" class="col-md-4" >
	   				<h:dataTable value="#{rankingBean.rankingsGeral}" var="r" styleClass="table" id="tabela">
	   					<h:column>
	   						<f:facet name="header">Posicao</f:facet>
	   						<i class="fa fa-trophy"></i>
	   						<span class="badge">#{r.posicaoTotal}</span>
	   					</h:column>
	   					<h:column>
	   						<f:facet name="header">Nome</f:facet>
	   						#{r.aluno.nome}
	   					</h:column>
	   				</h:dataTable> 
	    </h:panelGrid>
	    <div class="col-md-2">
	    </div>
	    <h:panelGrid columns="2" class="col-md-4" >
	   				<h:dataTable value="#{rankingBean.historicosAula}" var="h" styleClass="table" id="tabela2">
	   					<h:column>
	   						<f:facet name="header">Posicao</f:facet>
	   						<i class="fa fa-trophy"></i>
	   						<span class="badge">#{h.posicaoAula}</span>
	   					</h:column>
	   					<h:column>
	   						<f:facet name="header">Nome</f:facet>
	   						#{h.aluno.nome}
	   					</h:column>
	   				</h:dataTable> 
	    </h:panelGrid>
	    </div>
	


	    
	</ui:define>
</ui:composition>
</html>
